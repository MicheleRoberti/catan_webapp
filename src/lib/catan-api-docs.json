{
  "openapi": "3.0.1",
  "info": { "title": "OpenAPI definition", "version": "v0" },
  "servers": [{ "url": "http://localhost:8080", "description": "Generated server url" }],
  "paths": {
    "/player/{id}": {
      "get": {
        "tags": ["player-controller"],
        "operationId": "getPlayer",
        "parameters": [{ "name": "id", "in": "path", "required": true, "schema": { "type": "integer", "format": "int64" } }],
        "responses": { "200": { "description": "OK", "content": { "*/*": { "schema": { "$ref": "#/components/schemas/PlayerDTO" } } } } }
      },
      "put": {
        "tags": ["player-controller"],
        "operationId": "updatePlayer",
        "parameters": [{ "name": "id", "in": "path", "required": true, "schema": { "type": "integer", "format": "int64" } }],
        "requestBody": { "content": { "application/json": { "schema": { "$ref": "#/components/schemas/PlayerDTO" } } }, "required": true },
        "responses": { "200": { "description": "OK" } }
      }
    },
    "/game/{id}": {
      "get": {
        "tags": ["game-controller"],
        "operationId": "findGameById",
        "parameters": [{ "name": "id", "in": "path", "required": true, "schema": { "type": "integer", "format": "int64" } }],
        "responses": { "200": { "description": "OK", "content": { "*/*": { "schema": { "$ref": "#/components/schemas/GameDTO" } } } } }
      },
      "put": {
        "tags": ["game-controller"],
        "operationId": "endGame",
        "parameters": [{ "name": "id", "in": "path", "required": true, "schema": { "type": "integer", "format": "int64" } }],
        "requestBody": {
          "content": { "application/json": { "schema": { "type": "array", "items": { "$ref": "#/components/schemas/GamePlayerDTO" } } } },
          "required": true
        },
        "responses": { "200": { "description": "OK" } }
      }
    },
    "/player": {
      "get": {
        "tags": ["player-controller"],
        "operationId": "search",
        "parameters": [
          { "name": "username", "in": "query", "required": false, "schema": { "type": "string" } },
          { "name": "email", "in": "query", "required": false, "schema": { "type": "string" } },
          { "name": "deleted", "in": "query", "required": false, "schema": { "type": "boolean" } },
          {
            "name": "page",
            "in": "query",
            "description": "Zero-based page index (0..N)",
            "required": false,
            "schema": { "minimum": 0, "type": "integer", "default": 0 }
          },
          {
            "name": "size",
            "in": "query",
            "description": "The size of the page to be returned",
            "required": false,
            "schema": { "minimum": 1, "type": "integer", "default": 5 }
          },
          {
            "name": "sort",
            "in": "query",
            "description": "Sorting criteria in the format: property,(asc|desc). Default sort order is ascending. Multiple sort criteria are supported.",
            "required": false,
            "schema": { "type": "array", "items": { "type": "string" }, "default": ["id,ASC"] }
          }
        ],
        "responses": {
          "200": { "description": "OK", "content": { "*/*": { "schema": { "$ref": "#/components/schemas/PagePlayerDTO" } } } }
        }
      },
      "post": {
        "tags": ["player-controller"],
        "operationId": "newPlayer",
        "requestBody": { "content": { "application/json": { "schema": { "$ref": "#/components/schemas/PlayerDTO" } } }, "required": true },
        "responses": { "201": { "description": "Created", "content": { "*/*": { "schema": { "type": "integer", "format": "int64" } } } } }
      }
    },
    "/game": {
      "get": {
        "tags": ["game-controller"],
        "operationId": "searchGames",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "Zero-based page index (0..N)",
            "required": false,
            "schema": { "minimum": 0, "type": "integer", "default": 0 }
          },
          {
            "name": "size",
            "in": "query",
            "description": "The size of the page to be returned",
            "required": false,
            "schema": { "minimum": 1, "type": "integer", "default": 5 }
          },
          {
            "name": "sort",
            "in": "query",
            "description": "Sorting criteria in the format: property,(asc|desc). Default sort order is ascending. Multiple sort criteria are supported.",
            "required": false,
            "schema": { "type": "array", "items": { "type": "string" }, "default": ["startTimestamp,DESC"] }
          }
        ],
        "responses": {
          "200": { "description": "OK", "content": { "*/*": { "schema": { "$ref": "#/components/schemas/PageGameInfoDTO" } } } }
        }
      },
      "post": {
        "tags": ["game-controller"],
        "operationId": "createGame",
        "requestBody": {
          "content": { "application/json": { "schema": { "$ref": "#/components/schemas/GameSetupDTO" } } },
          "required": true
        },
        "responses": { "201": { "description": "Created", "content": { "*/*": { "schema": { "type": "integer", "format": "int64" } } } } }
      }
    },
    "/game/{gameId}/turn": {
      "post": {
        "tags": ["game-controller"],
        "operationId": "newTurn",
        "parameters": [{ "name": "gameId", "in": "path", "required": true, "schema": { "type": "integer", "format": "int64" } }],
        "requestBody": { "content": { "application/json": { "schema": { "$ref": "#/components/schemas/TurnDTO" } } }, "required": true },
        "responses": { "201": { "description": "Created" } }
      },
      "delete": {
        "tags": ["game-controller"],
        "operationId": "deleteLastTurn",
        "parameters": [{ "name": "gameId", "in": "path", "required": true, "schema": { "type": "integer", "format": "int64" } }],
        "responses": { "204": { "description": "No Content" } }
      }
    },
    "/statistics/player-dice-dashboard": {
      "get": {
        "tags": ["statistics-controller"],
        "operationId": "getPlayerOverallDiceDashboard",
        "parameters": [{ "name": "playerId", "in": "query", "required": true, "schema": { "type": "integer", "format": "int64" } }],
        "responses": {
          "200": {
            "description": "OK",
            "content": { "*/*": { "schema": { "type": "object", "additionalProperties": { "type": "integer", "format": "int64" } } } }
          }
        }
      }
    },
    "/statistics/game-dice-dashboard": {
      "get": {
        "tags": ["statistics-controller"],
        "operationId": "getGameDiceDashboard",
        "parameters": [{ "name": "gameId", "in": "query", "required": true, "schema": { "type": "integer", "format": "int64" } }],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "type": "object",
                  "additionalProperties": { "type": "object", "additionalProperties": { "type": "integer", "format": "int64" } }
                }
              }
            }
          }
        }
      }
    },
    "/server-status": { "get": { "tags": ["server-status"], "operationId": "status", "responses": { "200": { "description": "OK" } } } }
  },
  "components": {
    "schemas": {
      "PlayerDTO": {
        "required": ["email", "username"],
        "type": "object",
        "properties": {
          "id": { "type": "integer", "format": "int64", "readOnly": true },
          "username": { "type": "string" },
          "email": { "type": "string" },
          "avatarUrl": { "type": "string" },
          "deleted": { "type": "boolean" }
        },
        "description": "Player Entity not related to a specific game"
      },
      "GamePlayerDTO": {
        "required": ["email", "playerColor", "username"],
        "type": "object",
        "properties": {
          "playerId": { "type": "integer", "format": "int64" },
          "username": { "type": "string" },
          "email": { "type": "string" },
          "avatarUrl": { "type": "string" },
          "startOrder": { "type": "integer", "format": "int32" },
          "playerColor": { "type": "string" },
          "developCardDrawn": { "minimum": 0, "type": "integer", "format": "int32" },
          "knightCardPlayed": { "minimum": 0, "type": "integer", "format": "int32" },
          "roadsBuilt": { "minimum": 2, "type": "integer", "format": "int32" },
          "coloniesBuilt": { "minimum": 2, "type": "integer", "format": "int32" },
          "citiesBuilt": { "minimum": 0, "type": "integer", "format": "int32" },
          "longestRoad": { "type": "boolean" },
          "largestArmy": { "type": "boolean" },
          "plainScore": { "minimum": 0, "type": "integer", "format": "int32" },
          "victoryPointsDrawn": { "type": "integer", "format": "int32" },
          "winner": { "type": "boolean" }
        },
        "description": "Player state relative to a specific game"
      },
      "GameInfoDTO": {
        "required": ["gameName", "gameType"],
        "type": "object",
        "properties": {
          "gameName": { "type": "string" },
          "gameType": { "type": "string", "enum": ["STANDARD", "SEAFARERS"] },
          "requiredVictoryPoints": { "minimum": 8, "type": "integer", "format": "int32" }
        },
        "description": "Basic info about the game"
      },
      "GamePlayerInfoDTO": {
        "required": ["playerColor"],
        "type": "object",
        "properties": {
          "gameId": { "type": "integer", "format": "int64", "readOnly": true },
          "playerId": { "type": "integer", "format": "int64" },
          "startOrder": { "maximum": 6, "minimum": 0, "type": "integer", "format": "int32" },
          "playerColor": { "type": "string" }
        },
        "description": "Basic info about the players participating to the game"
      },
      "GameSetupDTO": {
        "required": ["gameInfo"],
        "type": "object",
        "properties": {
          "gameInfo": { "$ref": "#/components/schemas/GameInfoDTO" },
          "playersInfo": { "type": "array", "items": { "$ref": "#/components/schemas/GamePlayerInfoDTO" } }
        },
        "description": "Required info to setup a new game"
      },
      "TurnDTO": {
        "type": "object",
        "properties": {
          "gameId": { "type": "integer", "format": "int64" },
          "playerId": { "type": "integer", "format": "int64" },
          "outcome": { "maximum": 12, "minimum": 2, "type": "integer", "format": "int32" },
          "developCardDrawn": { "minimum": 0, "type": "integer", "format": "int32" },
          "knightCardPlayed": { "type": "boolean" },
          "longestRoad": { "type": "boolean" },
          "largestArmy": { "type": "boolean" },
          "roadsBuilt": { "maximum": 16, "minimum": 0, "type": "integer", "format": "int32" },
          "coloniesBuilt": { "minimum": 0, "type": "integer", "format": "int32" },
          "citiesBuilt": { "minimum": 0, "type": "integer", "format": "int32" }
        },
        "description": "Action performed by a specific player in a specific game"
      },
      "PagePlayerDTO": {
        "type": "object",
        "properties": {
          "totalPages": { "type": "integer", "format": "int32" },
          "totalElements": { "type": "integer", "format": "int64" },
          "size": { "type": "integer", "format": "int32" },
          "content": { "type": "array", "items": { "$ref": "#/components/schemas/PlayerDTO" } },
          "number": { "type": "integer", "format": "int32" },
          "sort": { "type": "array", "items": { "$ref": "#/components/schemas/SortObject" } },
          "numberOfElements": { "type": "integer", "format": "int32" },
          "first": { "type": "boolean" },
          "last": { "type": "boolean" },
          "pageable": { "$ref": "#/components/schemas/PageableObject" },
          "empty": { "type": "boolean" }
        }
      },
      "PageableObject": {
        "type": "object",
        "properties": {
          "offset": { "type": "integer", "format": "int64" },
          "sort": { "type": "array", "items": { "$ref": "#/components/schemas/SortObject" } },
          "paged": { "type": "boolean" },
          "pageSize": { "type": "integer", "format": "int32" },
          "pageNumber": { "type": "integer", "format": "int32" },
          "unpaged": { "type": "boolean" }
        }
      },
      "SortObject": {
        "type": "object",
        "properties": {
          "direction": { "type": "string" },
          "nullHandling": { "type": "string" },
          "ascending": { "type": "boolean" },
          "property": { "type": "string" },
          "ignoreCase": { "type": "boolean" }
        }
      },
      "PageGameInfoDTO": {
        "type": "object",
        "properties": {
          "totalPages": { "type": "integer", "format": "int32" },
          "totalElements": { "type": "integer", "format": "int64" },
          "size": { "type": "integer", "format": "int32" },
          "content": { "type": "array", "items": { "$ref": "#/components/schemas/GameInfoDTO" } },
          "number": { "type": "integer", "format": "int32" },
          "sort": { "type": "array", "items": { "$ref": "#/components/schemas/SortObject" } },
          "numberOfElements": { "type": "integer", "format": "int32" },
          "first": { "type": "boolean" },
          "last": { "type": "boolean" },
          "pageable": { "$ref": "#/components/schemas/PageableObject" },
          "empty": { "type": "boolean" }
        }
      },
      "GameDTO": {
        "required": ["gameInfo", "gamePlayers"],
        "type": "object",
        "properties": {
          "gameInfo": { "$ref": "#/components/schemas/GameInfoDTO" },
          "gamePlayers": { "type": "array", "items": { "$ref": "#/components/schemas/GamePlayerDTO" } }
        },
        "description": "Representation of a game and its players"
      }
    }
  }
}
